<!DOCTYPE html>
<html>
  <head>
    <title>ESP32 Web Form Trigger | Contact Form Submissions for Arcade Machines</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "mvp" %>
    <%= stylesheet_link_tag "application" %>
    <%= javascript_importmap_tags %>

    <script
      data-goatcounter="https://analytics.patlog.co.uk/count"
      async
      src="https://analytics.patlog.co.uk/count.js"
    ></script>

    <%= favicon_link_tag asset_path("favicon.svg") %>
  </head>
  <body>
    <% if current_user %>
      <nav>
        <ul>
          <li>
            <%= link_to devices_path do %>
              <strong>Devices</strong>
            <% end %>
          </li>
          <li>
            <%= link_to forms_path do %>
              <strong>Forms</strong>
            <% end %>
          </li>
          <li>
            <%= link_to submissions_path do %>
              <strong>Submissions</strong>
            <% end %>
          </li>
          <% if current_user.admin? %>
            <li>
              <%= link_to users_path do %>
                <strong>Users</strong>
              <% end %>
            </li>
          <% end %>
          <li>
            <%= link_to change_password_user_path(current_user) do %>
              <strong>Password</strong>
            <% end %>
          </li>
          <li>
            <%= button_to "Log Out", logout_path, method: :delete %>
          </li>
        </ul>
      </nav>
    <% end %>
    <main>
      <% flash.each do |type, message| %>
        <article>
          <aside><%= message %></aside>
        </article>
      <% end %>

      <%= yield %>

      <footer>
        <p>
          <strong>Privacy policy:</strong> Contact information is only used for the specified form submission purpose.
        </p>
        <p>
          ESP32 Web Form Trigger - Contact form submissions for arcade machines
        </p>
      </footer>
    </main>
  </body>
</html>
